package com.acv.cheerz;import z.lib.com.aretha.slidemenu.SlideMenu;import android.app.TabActivity;import android.content.Intent;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.TabHost;import android.widget.TabHost.TabSpec;import android.widget.Toast;import com.acv.cheerz.activity.RootActivity;import com.acv.cheerz.service.CheerzServiceCallBack;import com.acv.cheerz.util.CheerzUtils;import com.acv.cheerz.view.MenuLeftView;import com.acv.cheerz.view.MenuLeftView.IMenuLeftOnClick;@SuppressWarnings("deprecation")public class MainActivity extends TabActivity {	private MenuLeftView menuLeftView;	private SlideMenu slideMenu;	private String TAG = "MainActivity";	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.activity_main);		Log.i(TAG, "ok "  );		slideMenu = (SlideMenu) findViewById(R.id.slideMenu);		((CheerzApplication) getApplication()).initService(cheerzServiceCallBack);		menuLeftView = (MenuLeftView) findViewById(R.id.menuleft);		menuLeftView.setOnItemClickListener(onItemClickListener);		menuLeftView.setiMenuLeftOnClick(new IMenuLeftOnClick() {			@Override			public void onClickItem(int resId) {				//CheerzUtils.saveLogin(MainActivity.this, true);				Intent intent = new Intent(MainActivity.this, RootActivity.class);				Bundle extras = new Bundle();				Log.i(TAG, "menu click : " + getString(resId));//				extras.putString("type", resId == R.id.login ? "login" : "register");				if (resId == R.id.login) {					extras.putString("type","login");				}else if(resId == R.id.register){					extras.putString("type","register");				}else if(resId == R.id.item1){					extras.putString("type","edit_profile");				}else if(getString(resId).equals(getString(R.string.earn_points))){//					gotoPageZ(R.string.earn_points);					extras.putString("type","earn_points");				}				intent.putExtras(extras);				startActivity(intent);			}		});//		CheerzUtils.streamView(this, "http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4");	}	private OnItemClickListener onItemClickListener = new OnItemClickListener() {		@Override		public void onItemClick(AdapterView<?> parent, View view, int position, long id) {			slideMenu.close(true);			Integer integer = (Integer) parent.getItemAtPosition(position);			Log.i(TAG, "switch to view:");			if (integer == R.string.edit_profile) {				// getTabHost().setCurrentTab(4);				gotoPage(R.string.edit_profile);			} else if (integer == R.string.logout) {				CheerzUtils.saveLogin(MainActivity.this, false);				onInit();			} else if (integer == R.string.setting) {				gotoPage(R.string.setting);			} else if(integer == R.string.earn_points){				gotoPageZ(R.string.earn_points);				Log.i(TAG, "switch to view earn-point");			}else {				// getTabHost().setCurrentTab(0);			}//			Toast.makeText(MainActivity.this, getString(integer), Toast.LENGTH_SHORT).show();		}	};	protected void onPause() {		super.onPause();		slideMenu.close(true);	};	protected void gotoPage(int setting) {		Intent intent = new Intent(this, RootActivity.class);		intent.putExtra("type", getString(R.string.setting));		startActivity(intent);	}	protected void gotoPageZ(int setting) {		Intent intent = new Intent(this, RootActivity.class);		intent.putExtra("type", getString(setting));		startActivity(intent);	}		private CheerzServiceCallBack cheerzServiceCallBack = new CheerzServiceCallBack() {		public void onInitSuccess() {			addTab(RootActivity.class, "home", "home", "home");			// addTab(RootActivity.class, "home1", "home1", "home1");			// addTab(RootActivity.class, "home2", "home2", "hom2");			// addTab(RootActivity.class, "hom3", "hom3", "hom3");			// addTab(RootActivity.class, "A", "A", "A");		};	};	public void addTab(Class<?> activity, String tabSpect, String indicator, String type) {		TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);		TabSpec firstTabSpec = tabHost.newTabSpec(tabSpect);		Intent intent = new Intent(this, activity);		Bundle extras = new Bundle();		extras.putString("type", type);		intent.putExtras(extras);		firstTabSpec.setIndicator(indicator).setContent(intent);		tabHost.addTab(firstTabSpec);	}	@Override	protected void onResume() {		super.onResume();		onInit();	}	private void onInit() {		menuLeftView.initData();	}	public void openMenuLeft() {		slideMenu.open(false, true);	}}